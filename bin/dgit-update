#!/bin/bash
source "dgit-locations"

#Add all files in the directory, commit them
git add . &>> "$dgitlog"

#Read the current status and include it in the automated git commit message.
status="$(git status)"

#Read the commit message from stdin (the heredoc)
git commit --file=- <<EOF &>> "$dgitlog"
Automated commit.

Status was as follows:
$status
EOF

#Pull any changes since last update
git pull "origin" &>> "$dgitlog"

#Push the changes to local branch since last update. Create remote branch if needed
git push "origin" &>> "$dgitlog"

#then
zenity --info --title="Updated Successfully" --text="The main store has been successfully updated."
#else
#	zenity --error --title="Error updating" --text="There was an error updating the main store.\nPlease contact an administrator."
#fi
